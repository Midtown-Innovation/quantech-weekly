# 量化科技周刊：清君侧

> In Progress

230701 第 3 期。

记录每周值得分享的金融量化和金融科技相关内容，周六发布。

本杂志[开源](https://github.com/Midtown-Innovation/quantech-weekly.git "开源地址")，欢迎[投稿](https://github.com/Midtown-Innovation/quantech-weekly/issues "投稿")。

开源内容也可以通过 [量化科技周刊](https://midtown.gitbook.io/quantech-weekly "量化科技周刊") 网页访问。

## 封面图

## 本周挑战

### Quant

(i) n 个随机变量的相关矩阵的[特征值](https://www.cuemath.com/algebra/eigenvalues/ "Eigenvalues")之和是什么？

(ii) 找出n个随机变量的非奇异相关矩阵的逆的特征值之和的下界。

### Programming


给定一个整数数组 `nums`，如果能将该数组划分为两个子集，使两个子集的元素之和相等，则返回 `true`，否则返回 `false`。

例1:

```
Input: nums = [1,5,11,5]
Output: true
Explanation: The array can be partitioned as [1, 5, 5] and [11].
```

例2:

```
Input: nums = [1,2,3,5]
Output: false
Explanation: The array cannot be partitioned into equal sum subsets.
```

限制条件:

```
1. 1 <= nums.length <= 200
2. 1 <= nums[i] <= 100
```

## 市场

## 量化

## 科技

### [Cash Flow modeling in SQL](https://www.sisense.com/blog/cash-flow-modeling-in-sql/ "Cash Flow modeling in SQL")

在交易系统中每笔交易会产生两类簿记：货的簿记和钱的簿记。这一般通过双边簿记（Double Entry Accounting）来完成。

$$
Change = Revenue - Costs
$$

在传统金融 EOD（End of Day）之后会通过轧差（Netting）来获取每个账户今日的 Revenue, Costs 从而计算该账户在这个交易日的 Closing Balance 和 下个交易日的 Opening Balance。这些数据可以用于生成一些客户报告。

这篇文章介绍了如何在 SQL 中进行现金流建模。现金流建模是企业财务分析中的关键任务之一，它可以帮助企业管理者了解其现金流量的来源和去向，以便做出更明智的商业决策。

文章中首先介绍了现金流建模的基本原理和方法，包括现金流的分类、现金流预测的方法以及现金流建模的步骤。然后，作者详细介绍了如何使用 SQL 进行现金流建模，包括如何创建现金流表、如何使用 SQL 函数计算现金流、如何进行现金流预测等等。文章中还提供了一些示例代码和数据，以帮助读者更好地理解现金流建模在 SQL 中的实现。

最后，文章总结了现金流建模在企业财务分析中的重要性，并提供了一些实用的建议，帮助企业管理者更好地利用现金流建模来优化商业决策。

## [HikariCP 数据库连接池](https://mp.weixin.qq.com/s/ayCXva50GRsV8_X5aIykRQ "HikariCP 数据库连接池")

作为程序员我们知道申请内存使用的是 malloc，malloc 其实就是一个通用的大众货，什么场景下都可以用，但是什么场景下都可以用就意味着什么场景下都不会有很高的性能。而内存池技术专用于某个特定场景，以此优化程序性能。但内存 池技术的通用性是很差，在一种场景下有很高性能的内存池基本上没有办法在其它场景也能获得高 性能，甚至根本就不能用于其它场景。

创建和关闭数据库连接的开销很大，HikariCP 通过“池”来复用连接，减小开销([via](https://www.cnblogs.com/ZhangZiSheng001/p/12329937.html "源码详解系列(八)--全面讲解HikariCP的使用和源码"))。它本质上是一个在多线程场景下的 Lock-free 的数据库连接内存池。它可以在自己的内存池上提前创建出这些对象，当业务逻辑需要时就从内存池中申请已经创建好的对象，使用完毕后还回内存池，并且避免了锁带来的性能损耗。

这篇文章解析了 HikariCP 的核心代码，能够加深对高性能多线程并发编程的理解。

## 本周挑战答案

### Quant

(i) 矩阵的特征值之和等于矩阵的迹 $$tr(A)$$，[即等于矩阵的主对角线项之和](https://www.zhihu.com/question/267405336 "为什么特征值之和会等于矩阵的迹？")。这一属性源于这样一个事实：矩阵 A 的特征值是矩阵 A 的特征多项式 $$P_{A}(t)=det(tI - A)$$ 的根。

举个例子，

$$
\begin{aligned}

A &= \begin{bmatrix}
5 & 4 \\ 
1 & 2
\end{bmatrix} \\

tI - A &= \begin{bmatrix}
t - 5 & -4 \\ 
-1 & t - 2
\end{bmatrix} \\

P_{A}(t) &= det(tI - A) \\
&= (t-5)(t-2) - (-4)(-1) \\
&= t^{2} - 7t + 6 \\
&= (t-6)(t-1)

\end{aligned}
$$

注意这个 2x2 矩阵的一次项为 $$-5t-2t = -7t$$，这应该和特征矩阵的一次项相等。所以 $$tr(A) = \sum_{k=1}^{n}\lambda_{k}$$。

因为 n 个随机变量的相关矩阵是一个 nxn 矩阵，所有主对角线项都等于 1，所以相关矩阵的迹线等于 n。

(ii) 首先我们需要理解，非奇异的相关矩阵是对称正定的。TODO

### Programming

这题主要还是理解动态规划（Dynamic Programming），金融工程中动态规划可以用于奇异期权定价中的有限差分，二项式树法等场景。动态规划的实现主要有两种（[via](https://www.javatpoint.com/dynamic-programming "Dynamic Programming")），

- Bottom Up
- Top Down

[LeetCode 题解之 416. Partition Equal Subset Sum](https://github.com/azl397985856/leetcode/blob/master/problems/416.partition-equal-subset-sum.md "416.partition-equal-subset-sum")

（完）

![](https://raw.githubusercontent.com/Midtown-Innovation/quantech-weekly/main/resource/wechat.png)


